# Push-Cpp --- C++ Push Broadcast Server

## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#about)
- [üßë‚Äçüíº –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#architect)
- [‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#functionality)
  - [üß† Push Server](#push-server)
  - [ü§ñ –ö–ª–∏–µ–Ω—Ç—ã](#clients)
    - [üßë‚Äçüíº Console Client](#console-client)
    - [üßë‚Äçüíº GUI Client](#gui-client)
  - [üîÑ Push Generator](#push-generator)
  - [üíæ Database Module](#database)
  - [üß™ Tests](#tests)
- [‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#technology)
- [üß¨ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#dependency)
- [üì¶ –û–ø—Ü–∏–∏ —Å–±–æ—Ä–∫–∏](#options)
- [‚ñ∂Ô∏è –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#build)
- [üöÄ –ó–∞–ø—É—Å–∫](#launch)
- [üñ•Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è](#interaction)
---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ <a name="about"></a>

**Push-Cpp** --- —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –ø—É—à-—Ä–∞—Å—Å—ã–ª–∫–∏ –≤ —Å—Ç–∏–ª–µ SPSC (Server ‚Üí
Clients), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ C++ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Boost.Asio, SQLite –∏ Qt.

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø—Ä–∏—ë–º–∞ push —Å–æ–æ–±—â–µ–Ω–∏–π. –í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è : 
- –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
- –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ push-—Å–µ—Ä–≤–∏—Å–∞

------------------------------------------------------------------------

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ <a name="architect"></a>

```text
    Push-Cpp
    ‚îÇ
    ‚îú‚îÄ‚îÄ server/                # Push —Å–µ—Ä–≤–µ—Ä
    ‚îú‚îÄ‚îÄ client_console/        # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ client_gui/            # GUI –∫–ª–∏–µ–Ω—Ç (Qt 6)
    ‚îú‚îÄ‚îÄ client_lib/            # –û–±—â–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
    ‚îú‚îÄ‚îÄ push_generator/        # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä push-—Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ database/              # SQLite —Å–ª–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ common/                # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, –ø—Ä–æ—Ç–æ–∫–æ–ª
    ‚îú‚îÄ‚îÄ network/               # –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ transport —Å–ª–æ–π
    ‚îú‚îÄ‚îÄ tests/                 # Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ CMakeLists.txt
    ‚îú‚îÄ‚îÄ conanfile.txt
    ‚îî‚îÄ‚îÄ README.md
```

------------------------------------------------------------------------

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª <a name="functionality"></a>

### Push Server <a name="push-server"></a>

-   –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π TCP —Å–µ—Ä–≤–µ—Ä (Boost.Asio)
-   –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
-   –û—Ç–ø—Ä–∞–≤–∫–∞ push-—Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
-   –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π push-–∫–∞–Ω–∞–ª
-   –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ SQLite
-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON / Binary —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
-   Graceful shutdown

### –ö–ª–∏–µ–Ω—Ç—ã <a name="clients"></a>

#### Console Client <a name="console-client"></a>

-   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
-   –ü–æ–ª—É—á–µ–Ω–∏–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
-   –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

#### GUI Client (Qt 6) <a name="gui-client"></a>

-   –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
-   UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
-   –ò—Å—Ç–æ—Ä–∏—è push-—Å–æ–±—ã—Ç–∏–π

### Push Generator <a name="push-generator"></a>

-   –°–∏–º—É–ª—è—Ü–∏—è push-—Å–æ–±—ã—Ç–∏–π
-   Admin —Ä–µ–∂–∏–º (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥ push)
-   –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π

### Database Module <a name="database"></a>

-   SQLite3 storage
-   –¢–∞–±–ª–∏—Ü—ã ServerEvents
-   CRUD API
-   –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π —Å–ª–æ–π –ë–î

### Tests <a name="tests"></a>

-   GoogleTest\
-   Unit —Ç–µ—Å—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏\
-   –¢–µ—Å—Ç—ã –ë–î\
-   –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞

------------------------------------------------------------------------

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ <a name="technology"></a>

```text
  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è   –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
  ------------ --------------------
  C++20        –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
  Boost.Asio   –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å
  SQLite3      –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
  Qt 6         GUI –∫–ª–∏–µ–Ω—Ç
  GoogleTest   Unit-—Ç–µ—Å—Ç—ã
  Conan        Dependency manager
  CMake        –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
------------------------------------------------------------------------

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ <a name="dependency"></a>

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

-   CMake ‚â• 3.22
-   C++20 compiler (MSVC / GCC / Clang)
-   Conan 1.x –∏–ª–∏ 2.x
-   Boost
-   SQLite3

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

-   Qt 6 (–¥–ª—è GUI –∫–ª–∏–µ–Ω—Ç–∞)
-   GoogleTest (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)

------------------------------------------------------------------------

## –û–ø—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ <a name="options"></a>

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ CMake-–æ–ø—Ü–∏–∏:

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----|--------|-------------|
| `BUILD_GUI` | –°–æ–±–∏—Ä–∞—Ç—å Qt GUI –∫–ª–∏–µ–Ω—Ç | `OFF` |
| `BUILD_TESTS` | –°–æ–±–∏—Ä–∞—Ç—å unit-—Ç–µ—Å—Ç—ã (GoogleTest) | `ON` |
| `BUILD_QT_TESTS` | –°–æ–±–∏—Ä–∞—Ç—å Qt GUI —Ç–µ—Å—Ç—ã | `OFF` |
| `BUILD_DNETWORK_BUILD_EXAMPLES` | –°–æ–±—Ä–∞—Ç—å Demo network | `OFF` |
| `BUILD_DSERVER_BUILD_EXAMPLES` | –°–æ–±—Ä–∞—Ç—å Demo server | `OFF` |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞
–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã `BUILD_GUI=ON` **–∏** `BUILD_TESTS=ON`, —Ç–æ: BUILD_QT_TESTS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è

------------------------------------------------------------------------

## –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ <a name="build"></a>

### 1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Conan 2 (–æ–¥–∏–Ω —Ä–∞–∑)
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Conan 2 c —Å–∞–π—Ç–∞:

```text
https://conan.io/downloads
```

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è Conan:

```bash
conan profile detect --force
```

–£–∑–Ω–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è default –≤ Conan 2:

```bash
conan profile show -pr default
```

–ï—Å–ª–∏ —Å—Ç–æ–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ compiler.cppstd=14 (—Ç—É—Ç —Å—Ç–æ–∏—Ç 14 —Å—Ç–∞–Ω–¥–∞—Ä—Ç CPP),
—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 20 —Å—Ç–∞–Ω–¥–∞—Ä—Ç CPP, —á–∏—Ç–∞–π –¥–∞–ª–µ–µ.

–£–∑–Ω–∞—Ç—å –ø—É—Ç—å –∫ –ø—Ä–æ—Ñ–∏–ª—é : 

```bash
conan profile path default
```

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –∏–∑ –ø—É—Ç–∏ –∏ –¥–æ–±–∞–≤—å / –∏–∑–º–µ–Ω–∏: 

```text
[settings]
compiler.cppstd=14 –Ω–∞ compiler.cppstd=20
```

### 2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è toolchain
–°–æ–±–∏—Ä–∞—Ç—å—Å—è –±—É–¥–µ—Ç –¥–æ–ª–≥–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ 40 –º–∏–Ω—É—Ç) —Ç.–∫. —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–¥–ª—è —Å–∫–∞—á–∫–∏ –ø–∞–∫–µ—Ç–∞ Qt –Ω—É–∂–µ–Ω VPN)

```bash
conan install . \
  --output-folder=build \
  --build=missing \
  -pr default
```

### 3  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CMake. –î–ª—è –ø–æ–ª–Ω–æ–π —Å–±–æ—Ä–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ñ–ª–∞–≥–∏ —Å–±–æ—Ä–∫–∏(—Å–º. –¥–∞–ª–µ–µ):

–í –ø–æ–ª–µ DCMAKE_TOOLCHAIN_FILE= (—Å–º. –¥–∞–ª–µ–µ) –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –¥–æ conan_toolchain.cmake

```bash
cmake -S . -B build
-DCMAKE_TOOLCHAIN_FILE=build/build/generators/conan_toolchain.cmake
-DBUILD_GUI=ON
-DBUILD_TESTS=ON
-DNETWORK_BUILD_EXAMPLES=ON
-DSERVER_BUILD_EXAMPLES=ON
-DCMAKE_BUILD_TYPE=Release
```

### 4 –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cmake --build build --config Release
```

### 5 –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd build
ctest --output-on-failure
```

------------------------------------------------------------------------


## –ó–∞–ø—É—Å–∫ <a name="launch"></a>

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

``` bash
./push_server
```

### –ó–∞–ø—É—Å–∫ push –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

``` bash
./push_generator
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

``` bash
./client_console
```

### –ó–∞–ø—É—Å–∫ GUI –∫–ª–∏–µ–Ω—Ç–∞

``` bash
./client_gui
```

------------------------------------------------------------------------

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite —Ñ–∞–π–ª:

```text
    push_storage.db
```

------------------------------------------------------------------------


## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è <a name="interaction"></a>

```text
    Push Generator ‚Üí Server ‚Üí Clients (GUI / Console)
                             ‚Üì
                         SQLite Storage
```

------------------------------------------------------------------------


